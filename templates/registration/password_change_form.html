{% extends "login.html" %}
{% block contenido %}

{% if messages %}
  <div class="container mt-3">
    {% for message in messages %}
      <div class="alert {{ message.tags }} alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Cerrar"></button>
      </div>
    {% endfor %}
  </div>
{% endif %}

<form method="post" action="{% url 'password_change' %}">
  {% csrf_token %}

  <!-- Errores generales -->
  {% if form.non_field_errors %}
    <div class="alert alert-danger">
      {% for error in form.non_field_errors %}
        <p>{{ error }}</p>
      {% endfor %}
    </div>
  {% endif %}

  <div class="mb-1 p-3 text-left">
    {{ form.old_password.label_tag }} <br>
    {{ form.old_password }}
    {% for error in form.old_password.errors %}
      <div class="text-danger small">{{ error }}</div>
    {% endfor %}
  </div>

  <div class="mb-1 p-3 text-left">
    {{ form.new_password1.label_tag }} <br>
    {{ form.new_password1 }}
    {% for error in form.new_password1.errors %}
      <div class="text-danger small">{{ error }}</div>
    {% endfor %}
  </div>

  <div class="mb-1 p-3 text-left">
    {{ form.new_password2.label_tag }} <br>
    {{ form.new_password2 }}
    {% for error in form.new_password2.errors %}
      <div class="text-danger small">{{ error }}</div>
    {% endfor %}
  </div>

  <div class="mb-1 p-3 text-center">
    <input type="submit" value="Cambiar contraseña">
  </div>

  <div class="mb-1 p-3 text-center">
    <a href="{% url 'salir' %}">Cerrar sesión</a>
  </div>
</form>

{% endblock %}
